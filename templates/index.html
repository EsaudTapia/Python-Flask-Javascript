{% extends "layout.html" %}
{% block content %}

{% from '_macros.html' import render_field %}


{{ render_field(persona.fname,id='fname',name='Nombre:') }}
{{ render_field(persona.lname,id='lname',name='Apellido:') }}
<br>
<button type="submit" onclick='myfunction();'>Enviar informacion</button>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
    function myfunction() {

        const nombre = document.getElementById("fname").value;
        const apellido = document.getElementById("lname").value;


        const dict_values = {'nombre':nombre, 'apellido':apellido} //Pass the javascript variables to a dictionary.
        const s = JSON.stringify(dict_values); // Stringify converts a JavaScript object or value to a JSON string
        console.log(s); // Prints the variables to console window, which are in the JSON format
        window.alert(s)
        $.ajax({
            url:"/test",
            type:"POST",
            contentType: "application/json",
            data: JSON.stringify(s)
        })
        .done(function(data) {
            if (data.error) {
               alert(data.error)
            }
            else {
                 alert(data.mensaje)
            }
        });
}

</script>





{% endblock%}